<!DOCTYPE html>

<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>X æ¨ç‰¹ä¼˜åŒ–å™¨ - åŸºäºå®˜æ–¹å¼€æºç®—æ³•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: #0a0e27;
        color: #fff;
        min-height: 100vh;
        overflow-x: hidden;
    }

    .bg-animation {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
            radial-gradient(ellipse at top, #1e3a8a 0%, transparent 50%),
            radial-gradient(ellipse at bottom, #7c3aed 0%, transparent 50%),
            linear-gradient(180deg, #0a0e27 0%, #1a1f3a 100%);
        z-index: 0;
    }

    .container {
        position: relative;
        z-index: 1;
        max-width: 900px;
        margin: 0 auto;
        padding: 0;
    }

    .header {
        background: rgba(10, 14, 39, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(124, 58, 237, 0.3);
        padding: 15px 20px;
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .logo {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .logo-icon {
        font-size: 24px;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    .logo-text h1 {
        font-size: 1.2em;
        background: linear-gradient(135deg, #00d4ff 0%, #7c3aed 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 700;
    }

    .logo-text .subtitle {
        font-size: 0.7em;
        color: #64748b;
        margin-top: -2px;
    }

    .creator-badge {
        background: linear-gradient(135deg, #7c3aed 0%, #00d4ff 100%);
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.7em;
        font-weight: 600;
        box-shadow: 0 0 20px rgba(124, 58, 237, 0.5);
    }

    .content {
        padding: 15px;
    }

    .card {
        background: rgba(15, 23, 42, 0.6);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(124, 58, 237, 0.3);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        transition: all 0.3s;
    }

    .card:hover {
        border-color: rgba(0, 212, 255, 0.5);
        box-shadow: 0 8px 32px rgba(0, 212, 255, 0.2);
    }

    .card-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(124, 58, 237, 0.2);
    }

    .card-icon {
        width: 32px;
        height: 32px;
        background: linear-gradient(135deg, #7c3aed 0%, #00d4ff 100%);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
    }

    .card-title {
        font-size: 1.1em;
        font-weight: 700;
        background: linear-gradient(135deg, #fff 0%, #00d4ff 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .input-group {
        margin-bottom: 15px;
    }

    .input-label {
        display: block;
        margin-bottom: 8px;
        color: #94a3b8;
        font-size: 0.9em;
        font-weight: 600;
    }

    textarea, input[type="text"] {
        width: 100%;
        padding: 12px 15px;
        background: rgba(30, 41, 59, 0.5);
        border: 2px solid rgba(124, 58, 237, 0.3);
        border-radius: 12px;
        color: #fff;
        font-size: 15px;
        font-family: inherit;
        transition: all 0.3s;
    }

    textarea {
        min-height: 100px;
        resize: vertical;
    }

    textarea:focus, input[type="text"]:focus {
        outline: none;
        border-color: #00d4ff;
        background: rgba(30, 41, 59, 0.8);
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
    }

    textarea::placeholder, input[type="text"]::placeholder {
        color: #475569;
    }

    .char-count {
        text-align: right;
        color: #64748b;
        font-size: 12px;
        margin-top: 5px;
        font-weight: 600;
    }

    .char-count.warning { color: #fbbf24; }
    .char-count.error { color: #ef4444; }

    .btn {
        width: 100%;
        padding: 14px 20px;
        background: linear-gradient(135deg, #7c3aed 0%, #00d4ff 100%);
        border: none;
        border-radius: 12px;
        color: #fff;
        font-size: 15px;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        transition: all 0.3s;
        box-shadow: 0 4px 20px rgba(124, 58, 237, 0.4);
    }

    .btn:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 6px 30px rgba(0, 212, 255, 0.6);
    }

    .btn:active:not(:disabled) {
        transform: translateY(0);
    }

    .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .btn-success {
        background: linear-gradient(135deg, #10b981 0%, #00d4ff 100%);
    }

    .btn-secondary {
        background: linear-gradient(135deg, #64748b 0%, #475569 100%);
    }

    .metrics {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin: 15px 0;
    }

    .metric-card {
        background: rgba(30, 41, 59, 0.5);
        border: 1px solid rgba(124, 58, 237, 0.3);
        border-radius: 12px;
        padding: 12px 8px;
        text-align: center;
        transition: all 0.3s;
    }

    .metric-card:hover {
        border-color: #00d4ff;
        transform: translateY(-2px);
    }

    .metric-value {
        font-size: 1.8em;
        font-weight: 700;
        background: linear-gradient(135deg, #00d4ff 0%, #7c3aed 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 4px;
    }

    .metric-label {
        color: #94a3b8;
        font-size: 0.75em;
        font-weight: 600;
    }

    .score-circle {
        width: 120px;
        height: 120px;
        margin: 20px auto;
        border-radius: 50%;
        background: conic-gradient(
            #00d4ff 0deg,
            #00d4ff calc(var(--score) * 3.6deg),
            rgba(30, 41, 59, 0.5) calc(var(--score) * 3.6deg)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
    }

    .score-circle::before {
        content: '';
        width: 95px;
        height: 95px;
        background: #0f172a;
        border-radius: 50%;
        position: absolute;
    }

    .score-text {
        font-size: 2.2em;
        font-weight: 700;
        background: linear-gradient(135deg, #00d4ff 0%, #7c3aed 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        z-index: 1;
    }

    .suggestions {
        background: rgba(30, 41, 59, 0.3);
        border: 1px solid rgba(124, 58, 237, 0.2);
        border-radius: 12px;
        padding: 15px;
        margin-top: 15px;
    }

    .suggestions-title {
        color: #00d4ff;
        font-size: 0.95em;
        font-weight: 700;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .suggestion-item {
        background: rgba(15, 23, 42, 0.6);
        border-left: 3px solid #7c3aed;
        border-radius: 8px;
        padding: 10px 12px;
        margin-bottom: 8px;
        font-size: 0.88em;
        color: #cbd5e1;
        line-height: 1.5;
    }

    .suggestion-item:last-child {
        margin-bottom: 0;
    }

    .alert {
        padding: 12px 15px;
        border-radius: 12px;
        margin-bottom: 15px;
        font-size: 0.88em;
        border-left: 4px solid;
    }

    .alert-info {
        background: rgba(0, 212, 255, 0.1);
        border-color: #00d4ff;
        color: #7dd3fc;
    }

    .alert-success {
        background: rgba(16, 185, 129, 0.1);
        border-color: #10b981;
        color: #6ee7b7;
    }

    .alert-warning {
        background: rgba(251, 191, 36, 0.1);
        border-color: #fbbf24;
        color: #fcd34d;
    }

    .alert-danger {
        background: rgba(239, 68, 68, 0.1);
        border-color: #ef4444;
        color: #fca5a5;
    }

    .tabs {
        display: flex;
        gap: 5px;
        margin-bottom: 15px;
        border-bottom: 2px solid rgba(124, 58, 237, 0.3);
    }

    .tab {
        padding: 10px 16px;
        background: none;
        border: none;
        border-bottom: 3px solid transparent;
        color: #64748b;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 0.9em;
    }

    .tab.active {
        color: #00d4ff;
        border-bottom-color: #00d4ff;
    }

    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
    }

    .btn-group {
        display: flex;
        gap: 10px;
        margin-top: 15px;
    }

    .spinner {
        border: 3px solid rgba(124, 58, 237, 0.3);
        border-top: 3px solid #00d4ff;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .loading-text {
        color: #94a3b8;
        margin-top: 12px;
        font-size: 0.9em;
        text-align: center;
    }

    .diagnosis-options {
        margin: 15px 0;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .option-card {
        background: rgba(30, 41, 59, 0.5);
        border: 2px solid rgba(124, 58, 237, 0.3);
        border-radius: 12px;
        padding: 12px 15px;
        cursor: pointer;
        transition: all 0.3s;
    }

    .option-card:hover {
        border-color: #00d4ff;
        background: rgba(30, 41, 59, 0.7);
    }

    .option-card.selected {
        border-color: #00d4ff;
        background: rgba(0, 212, 255, 0.1);
    }

    .option-header {
        display: flex;
        align-items: flex-start;
        gap: 10px;
    }

    .option-header input[type="radio"] {
        margin-top: 3px;
        cursor: pointer;
    }

    .option-header label {
        flex: 1;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .option-header label strong {
        color: #fff;
        font-size: 0.95em;
    }

    .option-header label span {
        color: #94a3b8;
        font-size: 0.85em;
    }

    .grok-prompt-box {
        background: rgba(30, 41, 59, 0.6);
        border: 2px solid #7c3aed;
        border-radius: 12px;
        padding: 15px;
        margin-top: 15px;
    }

    .grok-prompt-box h4 {
        color: #00d4ff;
        margin-bottom: 10px;
        font-size: 0.95em;
    }

    .prompt-text {
        background: rgba(15, 23, 42, 0.8);
        border: 1px solid rgba(124, 58, 237, 0.3);
        border-radius: 8px;
        padding: 12px;
        color: #cbd5e1;
        font-size: 0.85em;
        line-height: 1.6;
        font-family: 'Courier New', monospace;
        white-space: pre-wrap;
        word-wrap: break-word;
        max-height: 300px;
        overflow-y: auto;
    }

    .copy-prompt-btn {
        margin-top: 10px;
        background: linear-gradient(135deg, #7c3aed 0%, #00d4ff 100%);
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        color: white;
        font-weight: 600;
        cursor: pointer;
        font-size: 0.85em;
        width: 100%;
        transition: all 0.3s;
    }

    .copy-prompt-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 212, 255, 0.4);
    }

    .grok-link {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        color: #00d4ff;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.9em;
        margin-top: 10px;
        padding: 8px 15px;
        background: rgba(0, 212, 255, 0.1);
        border-radius: 8px;
        transition: all 0.3s;
    }

    .grok-link:hover {
        background: rgba(0, 212, 255, 0.2);
        transform: translateX(5px);
    }

    .retweet-prompt {
        background: linear-gradient(135deg, rgba(124, 58, 237, 0.2) 0%, rgba(0, 212, 255, 0.2) 100%);
        border: 2px solid #7c3aed;
        border-radius: 16px;
        padding: 20px;
        margin-top: 15px;
        text-align: center;
    }

    .retweet-prompt h3 {
        color: #00d4ff;
        font-size: 1.1em;
        margin-bottom: 15px;
    }

    .retweet-prompt p {
        color: #cbd5e1;
        font-size: 0.9em;
        line-height: 1.6;
        margin-bottom: 20px;
    }

    .retweet-btn {
        background: linear-gradient(135deg, #1DA1F2 0%, #00d4ff 100%);
        border: none;
        padding: 14px 30px;
        border-radius: 12px;
        color: white;
        font-weight: 700;
        font-size: 1em;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s;
        box-shadow: 0 4px 20px rgba(29, 161, 242, 0.4);
    }

    .retweet-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 30px rgba(0, 212, 255, 0.6);
    }

    .retweet-info {
        margin-top: 15px;
        padding: 12px;
        background: rgba(30, 41, 59, 0.5);
        border-radius: 8px;
        font-size: 0.85em;
        color: #94a3b8;
    }

    .verified-badge {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.85em;
        font-weight: 600;
        margin-top: 10px;
    }

    .influence-frame-container {
        background: rgba(30, 41, 59, 0.5);
        border: 2px solid rgba(124, 58, 237, 0.3);
        border-radius: 16px;
        overflow: hidden;
        margin-top: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .influence-header {
        background: rgba(124, 58, 237, 0.2);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid rgba(124, 58, 237, 0.3);
    }

    .influence-header h4 {
        color: #00d4ff;
        font-size: 1em;
        margin: 0;
    }

    .open-full-link {
        display: flex;
        align-items: center;
        gap: 5px;
        color: #94a3b8;
        text-decoration: none;
        font-size: 0.85em;
        transition: all 0.3s;
        padding: 5px 12px;
        border-radius: 8px;
        background: rgba(30, 41, 59, 0.5);
    }

    .open-full-link:hover {
        color: #00d4ff;
        background: rgba(0, 212, 255, 0.1);
    }

    .influence-frame {
        width: 100%;
        height: 600px;
        border: none;
        display: block;
        background: #fff;
    }

    .influence-footer {
        background: rgba(15, 23, 42, 0.8);
        padding: 10px 20px;
        text-align: center;
        border-top: 1px solid rgba(124, 58, 237, 0.3);
    }

    .influence-footer small {
        color: #94a3b8;
        font-size: 0.8em;
    }

    .influence-footer a {
        color: #00d4ff;
        text-decoration: none;
    }

    .influence-footer a:hover {
        text-decoration: underline;
    }

    @media (max-width: 600px) {
        .header {
            padding: 12px 15px;
        }

        .logo-text h1 {
            font-size: 1.1em;
        }

        .creator-badge {
            font-size: 0.65em;
            padding: 3px 10px;
        }

        .content {
            padding: 10px;
        }

        .card {
            padding: 15px;
        }

        .influence-frame {
            height: 500px;
        }

        .influence-header {
            flex-direction: column;
            gap: 10px;
            align-items: flex-start;
        }
    }
</style>
```

</head>
<body>
    <div class="bg-animation"></div>

```
<div class="container">
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ğŸš€</div>
                <div class="logo-text">
                    <h1>X æ¨ç‰¹ä¼˜åŒ–å™¨</h1>
                    <div class="subtitle">åŸºäºå®˜æ–¹å¼€æºç®—æ³•</div>
                </div>
            </div>
            <div class="creator-badge">å¸ä¸–ç‹</div>
        </div>
    </div>

    <div class="content">
        <!-- æ¨æ–‡ä¼˜åŒ–å¡ç‰‡ - ç§»åˆ°æœ€ä¸Šé¢ -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">âœ¨</div>
                <div class="card-title">æ¨æ–‡ä¼˜åŒ– - Phoenix ç®—æ³•</div>
            </div>

            <div class="alert alert-info">
                ğŸ”¬ åŸºäº X å®˜æ–¹å¼€æºçš„ Phoenix Transformer ç®—æ³•ä¼˜åŒ–
            </div>

            <div class="input-group">
                <label class="input-label">è¾“å…¥ä½ çš„æ¨æ–‡å†…å®¹</label>
                <textarea id="tweetInput" placeholder="åœ¨è¿™é‡Œè¾“å…¥ä½ æƒ³å‘å¸ƒçš„æ¨æ–‡å†…å®¹..."></textarea>
                <div class="char-count" id="charCount">0 / 280</div>
            </div>

            <button class="btn" id="analyzeBtn">
                <span>ğŸ”</span>
                <span>åˆ†æå¹¶ä¼˜åŒ–</span>
            </button>

            <div id="optimizationResults"></div>
        </div>

        <!-- ä¼˜åŒ–ç»“æœé¢„è§ˆå¡ç‰‡ -->
        <div class="card" id="previewCard" style="display: none;">
            <div class="card-header">
                <div class="card-icon">ğŸ“Š</div>
                <div class="card-title">ä¼˜åŒ–ç»“æœ</div>
            </div>

            <div class="tabs">
                <button class="tab active" data-tab="original">åŸå§‹</button>
                <button class="tab" data-tab="optimized">ä¼˜åŒ–</button>
                <button class="tab" data-tab="comparison">å¯¹æ¯”</button>
            </div>

            <div class="tab-content active" id="originalTab">
                <div class="input-group">
                    <label class="input-label">åŸå§‹æ¨æ–‡</label>
                    <textarea id="originalTweet" readonly style="background: rgba(30, 41, 59, 0.3);"></textarea>
                </div>
            </div>

            <div class="tab-content" id="optimizedTab">
                <div class="input-group">
                    <label class="input-label">ä¼˜åŒ–åçš„æ¨æ–‡</label>
                    <textarea id="optimizedTweet"></textarea>
                    <div class="char-count" id="optimizedCharCount">0 / 280</div>
                </div>
            </div>

            <div class="tab-content" id="comparisonTab">
                <div class="metrics">
                    <div class="metric-card">
                        <div class="metric-value" id="engagementScore">0%</div>
                        <div class="metric-label">äº’åŠ¨ç‡</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="viralScore">0%</div>
                        <div class="metric-label">ä¼ æ’­åŠ›</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="qualityScore">0%</div>
                        <div class="metric-label">è´¨é‡åˆ†</div>
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-success" id="postToTwitterBtn" style="flex: 2;">
                    <span>ğŸš€</span>
                    <span>å‘å¸ƒåˆ° X</span>
                </button>
                <button class="btn btn-secondary" id="copyBtn" style="flex: 1;">
                    <span>ğŸ“‹</span>
                    <span>å¤åˆ¶</span>
                </button>
            </div>
        </div>

        <!-- è´¦å·å¥åº·è¯Šæ–­å¡ç‰‡ -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ¥</div>
                <div class="card-title">è´¦å·å¥åº·è¯Šæ–­</div>
            </div>

            <div class="alert alert-info">
                ğŸ’¡ åŸºäº X Algorithm çš„æ·±åº¦è´¦å·åˆ†æ
            </div>

            <div class="input-group">
                <label class="input-label">ä½ çš„ X ç”¨æˆ·å</label>
                <input type="text" id="xUsername" placeholder="@your_username">
            </div>

            <button class="btn" id="checkInfluenceBtn" style="margin-bottom: 15px;">
                <span>ğŸ“Š</span>
                <span>æŸ¥çœ‹å½±å“åŠ›æŒ‡æ•° (Sorsa.io)</span>
            </button>

            <div id="influenceResults"></div>

            <div class="diagnosis-options">
                <div class="option-card selected" data-mode="basic">
                    <div class="option-header">
                        <input type="radio" name="diagMode" id="basicMode" checked>
                        <label for="basicMode">
                            <strong>ğŸ” åŸºç¡€åˆ†æ</strong>
                            <span>æœ¬åœ°ç®—æ³•å¿«é€Ÿè¯Šæ–­</span>
                        </label>
                    </div>
                </div>
                <div class="option-card" data-mode="grok">
                    <div class="option-header">
                        <input type="radio" name="diagMode" id="grokMode">
                        <label for="grokMode">
                            <strong>ğŸ¤– Grok AI æ·±åº¦åˆ†æ</strong>
                            <span>AI è‡ªåŠ¨ç”Ÿæˆä¸“ä¸šæŠ¥å‘Š</span>
                        </label>
                    </div>
                </div>
            </div>

            <button class="btn" id="diagnoseBtn">
                <span>ğŸ”¬</span>
                <span>å¼€å§‹è¯Šæ–­</span>
            </button>

            <div id="retweetPrompt" style="display: none;"></div>
            <div id="healthResults"></div>
            <div id="grokPrompt" style="display: none;"></div>
        </div>
    </div>
</div>

<script>
    // åº”ç”¨çŠ¶æ€
    const AppState = {
        hasClickedTweet: false
    };

    // å·¥å…·å‡½æ•°
    const Utils = {
        showAlert(containerId, message, type) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = `
                    <div class="alert alert-${type}" style="margin-top: 15px;">
                        ${message}
                    </div>
                `;
            }
        },

        showLoading(containerId, message) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <div class="spinner"></div>
                        <div class="loading-text">${message}</div>
                    </div>
                `;
            }
        },

        updateCharCount(textarea, countElement, maxLength = 280) {
            const length = textarea.value.length;
            countElement.textContent = `${length} / ${maxLength}`;
            
            countElement.classList.remove('warning', 'error');
            if (length > maxLength) {
                countElement.classList.add('error');
            } else if (length > maxLength - 20) {
                countElement.classList.add('warning');
            }
        },

        copyToClipboard(text, successCallback, errorCallback) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text)
                    .then(successCallback)
                    .catch(() => this.fallbackCopy(text, successCallback, errorCallback));
            } else {
                this.fallbackCopy(text, successCallback, errorCallback);
            }
        },

        fallbackCopy(text, successCallback, errorCallback) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                if (successCallback) successCallback();
            } catch (err) {
                if (errorCallback) errorCallback();
            }
            document.body.removeChild(textarea);
        }
    };

    // æ¨æ–‡åˆ†æå™¨ - åŸºäº X å¼€æºç®—æ³•
    const TweetAnalyzer = {
        // åŸºäº Phoenix ç®—æ³•çš„æƒé‡ (æ¥è‡ª 2023 å¹´å¼€æºæ•°æ®)
        ENGAGEMENT_WEIGHTS: {
            favorite: 0.5,      // ç‚¹èµæƒé‡æœ€ä½
            reply: 13.5,        // å›å¤æƒé‡å¾ˆé«˜
            repost: 1.0,        // è½¬å‘
            quote: 1.0,         // å¼•ç”¨
            click: 0.1,         // ç‚¹å‡»
            profile_click: 0.1, // æŸ¥çœ‹èµ„æ–™
            video_view: 0.005,  // è§†é¢‘æ’­æ”¾
            photo_expand: 0.005,// å›¾ç‰‡å±•å¼€
            report: -50,        // ä¸¾æŠ¥ï¼ˆè´Ÿé¢ï¼‰
            block: -50,         // æ‹‰é»‘ï¼ˆè´Ÿé¢ï¼‰
            mute: -50,          // å±è”½ï¼ˆè´Ÿé¢ï¼‰
            not_interested: -5  // ä¸æ„Ÿå…´è¶£ï¼ˆè´Ÿé¢ï¼‰
        },

        analyze(tweet) {
            // åˆå§‹åŒ–å„ç±»äº’åŠ¨æ¦‚ç‡
            let probabilities = {
                favorite: 0.3,
                reply: 0.1,
                repost: 0.05,
                quote: 0.03,
                click: 0.2,
                profile_click: 0.05,
                video_view: 0,
                photo_expand: 0,
                report: 0.001,
                block: 0.001,
                mute: 0.001,
                not_interested: 0.01
            };

            let suggestions = [];

            // 1. å›å¤è¯±å¯¼åˆ†æï¼ˆæœ€é‡è¦ - æƒé‡ 13.5ï¼‰
            const hasQuestion = tweet.includes('?') || tweet.includes('ï¼Ÿ');
            if (hasQuestion) {
                probabilities.reply += 0.25;
                probabilities.favorite += 0.1;
                suggestions.push("âœ… åŒ…å«é—®é¢˜èƒ½å¤§å¹…æé«˜å›å¤ç‡ï¼ˆ13.5xæƒé‡ï¼‰- Xç®—æ³•æœ€é‡è§†çš„äº’åŠ¨");
            } else {
                suggestions.push("ğŸ”¥ æ·»åŠ å¼•å‘è®¨è®ºçš„é—®é¢˜å¯æå‡å›å¤ç‡ - è¿™æ˜¯Xç®—æ³•æœ€çœ‹é‡çš„äº’åŠ¨ï¼ˆ13.5xæƒé‡ï¼‰");
            }

            // 2. å¯¹è¯æ€§è¯­è¨€
            const conversationalWords = ['ä½ è§‰å¾—', 'ä½ è®¤ä¸º', 'åŒæ„å—', 'æ€ä¹ˆçœ‹', 'æœ‰äºº', 'å¤§å®¶'];
            const hasConversational = conversationalWords.some(word => tweet.includes(word));
            if (hasConversational) {
                probabilities.reply += 0.15;
                suggestions.push("âœ… å¯¹è¯æ€§è¯­è¨€æé«˜å‚ä¸åº¦");
            }

            // 3. é•¿åº¦ä¼˜åŒ–ï¼ˆåŸºäº Grok transformer çš„æœ€ä½³å®è·µï¼‰
            if (tweet.length < 50) {
                probabilities.favorite -= 0.1;
                probabilities.reply -= 0.05;
                suggestions.push("âš ï¸ æ¨æ–‡å¤ªçŸ­ - å»ºè®®80-180å­—ç¬¦è·å¾—æœ€ä½³äº’åŠ¨");
            } else if (tweet.length > 200) {
                probabilities.click += 0.1;
                suggestions.push("ğŸ“± è¾ƒé•¿æ¨æ–‡ - è€ƒè™‘åˆ†æ®µæˆ–ä½¿ç”¨ thread æé«˜å¯è¯»æ€§");
            } else {
                probabilities.favorite += 0.1;
                probabilities.reply += 0.05;
            }

            // 4. Emoji åˆ†æ
            const emojiRegex = /[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/u;
            if (emojiRegex.test(tweet)) {
                probabilities.favorite += 0.05;
                probabilities.click += 0.05;
            } else {
                suggestions.push("ğŸ˜Š é€‚å½“æ·»åŠ emojiæé«˜å¸å¼•åŠ›å’Œç‚¹å‡»ç‡");
            }

            // 5. è¯é¢˜æ ‡ç­¾ä¼˜åŒ–
            const hashtags = (tweet.match(/#/g) || []).length;
            if (hashtags > 0 && hashtags <= 2) {
                probabilities.click += 0.1;
                probabilities.repost += 0.05;
            } else if (hashtags > 2) {
                probabilities.not_interested += 0.05;
                suggestions.push("âš ï¸ è¯é¢˜æ ‡ç­¾è¿‡å¤šå¯èƒ½é™ä½äº’åŠ¨ - å»ºè®®1-2ä¸ªç²¾å‡†æ ‡ç­¾");
            } else {
                suggestions.push("ğŸ“Œ æ·»åŠ 1-2ä¸ªç›¸å…³æ ‡ç­¾æ‰©å¤§æ›å…‰èŒƒå›´");
            }

            // 6. åª’ä½“å†…å®¹æ£€æµ‹
            if (tweet.includes('http')) {
                probabilities.click += 0.15;
                probabilities.favorite += 0.05;
            }

            // 7. @æåŠ
            if (tweet.includes('@')) {
                probabilities.reply += 0.1;
                probabilities.profile_click += 0.05;
            }

            // 8. è´Ÿé¢å†…å®¹æ£€æµ‹
            const negativeWords = ['è®¨åŒ', 'åƒåœ¾', 'æ„šè ¢', 'å‚»', 'æ¶å¿ƒ'];
            const hasNegative = negativeWords.some(word => tweet.includes(word));
            if (hasNegative) {
                probabilities.report += 0.02;
                probabilities.not_interested += 0.05;
                probabilities.favorite -= 0.1;
            }

            // 9. å…¨å¤§å†™æ£€æµ‹ï¼ˆX ç®—æ³•ä¼šé™æƒï¼‰
            const upperCaseRatio = (tweet.match(/[A-Z]/g) || []).length / tweet.length;
            if (upperCaseRatio > 0.5) {
                probabilities.not_interested += 0.1;
                suggestions.push("âš ï¸ è¿‡å¤šå¤§å†™å­—æ¯ä¼šè¢«ç®—æ³•é™æƒ");
            }

            // è®¡ç®—åŠ æƒåˆ†æ•°ï¼ˆåŸºäº Phoenix Weighted Scorerï¼‰
            let finalScore = 0;
            for (const [action, prob] of Object.entries(probabilities)) {
                finalScore += prob * this.ENGAGEMENT_WEIGHTS[action];
            }

            // æ ‡å‡†åŒ–ä¸ºç™¾åˆ†æ¯”
            const engagement_score = Math.max(20, Math.min(95, Math.round(40 + finalScore * 10)));
            const viral_potential = Math.max(20, Math.min(95, Math.round(35 + probabilities.repost * 100 + probabilities.quote * 80)));
            const quality_score = Math.max(20, Math.min(95, Math.round(50 + probabilities.favorite * 60 - probabilities.not_interested * 100)));

            // ç”Ÿæˆä¼˜åŒ–ç‰ˆæœ¬
            const optimized = this.generateOptimized(tweet, probabilities, emojiRegex);

            return {
                engagement_score,
                viral_potential,
                quality_score,
                suggestions: suggestions.slice(0, 4),
                optimized_tweet: optimized,
                probabilities
            };
        },

        generateOptimized(tweet, probabilities, emojiRegex) {
            let optimizedParts = [];
            let needsImprovement = false;

            // å¦‚æœæ²¡æœ‰ emoji ä¸”äº’åŠ¨ç‡ä½ï¼Œæ·»åŠ  emoji
            if (!emojiRegex.test(tweet) && probabilities.favorite < 0.4) {
                const relevantEmojis = ['ğŸ’¡', 'ğŸ”¥', 'ğŸ¤”', 'ğŸ“ˆ', 'âš¡'];
                optimizedParts.push(relevantEmojis[Math.floor(Math.random() * relevantEmojis.length)]);
                needsImprovement = true;
            }
            
            optimizedParts.push(tweet);
            
            // å¦‚æœæ²¡æœ‰é—®é¢˜ä¸”å›å¤ç‡ä½ï¼Œæ·»åŠ è®¨è®ºæ€§é—®é¢˜
            if (probabilities.reply < 0.2 && tweet.length < 240) {
                const questions = ['\n\nä½ æ€ä¹ˆçœ‹ï¼Ÿ', '\n\nåŒæ„å—ï¼Ÿ', '\n\nä½ çš„ç»å†æ˜¯ï¼Ÿ'];
                optimizedParts.push(questions[Math.floor(Math.random() * questions.length)]);
                needsImprovement = true;
            }
            
            // å¦‚æœæ²¡æœ‰æ ‡ç­¾ä¸”ä¼ æ’­åŠ›ä½ï¼Œæ·»åŠ ç›¸å…³æ ‡ç­¾
            if (!tweet.includes('#') && probabilities.repost < 0.1 && tweet.length < 260) {
                optimizedParts.push(' #è®¨è®º');
                needsImprovement = true;
            }

            const optimized = optimizedParts.join(' ').trim();
            
            // å¦‚æœä¼˜åŒ–åè¶…è¿‡280å­—ç¬¦ï¼Œè¿”å›åŸæ–‡
            // å¦‚æœæ²¡æœ‰éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œä¹Ÿè¿”å›åŸæ–‡
            return (optimized.length > 280 || !needsImprovement) ? tweet : optimized;
        }
    };

    // è´¦å·è¯Šæ–­å™¨
    const AccountDiagnoser = {
        diagnose(username) {
            let spamScore = 0;
            let toxicity = 0;
            let shadowbanRisk = 0;

            // ç”¨æˆ·ååˆ†æ
            const usernamePattern = /^[a-zA-Z0-9_]{1,15}$/;
            if (!usernamePattern.test(username)) spamScore += 20;
            if (username.length < 4) spamScore += 15;
            if (/\d{3,}/.test(username)) spamScore += 15;
            spamScore += Math.floor(Math.random() * 20);

            // ç¤¾äº¤æ¯’æ€§åˆ†æ
            if (/crypto|nft|airdrop|free|giveaway/i.test(username)) {
                toxicity += 25;
            }
            if (username.includes('_') && username.split('_').length > 2) {
                toxicity += 10;
            }
            toxicity += Math.floor(Math.random() * 25);

            // å°ç¦é£é™©
            if (spamScore > 30) shadowbanRisk += 15;
            if (toxicity > 30) shadowbanRisk += 15;
            shadowbanRisk += Math.floor(Math.random() * 20);

            // å¥åº·è¯„åˆ†
            let healthScore = 100;
            healthScore -= Math.floor(spamScore * 0.4);
            healthScore -= Math.floor(toxicity * 0.4);
            healthScore -= Math.floor(shadowbanRisk * 0.5);
            healthScore = Math.max(30, Math.min(95, healthScore));

            // ç”Ÿæˆå»ºè®®
            const actions = this.generateActions(spamScore, toxicity, shadowbanRisk);
            const diagnosis = this.generateDiagnosis(username, healthScore, spamScore, toxicity, shadowbanRisk);

            return {
                health_score: healthScore,
                spam_probability: Math.min(100, spamScore),
                social_toxicity: Math.min(100, toxicity),
                shadowban_risk: Math.min(100, shadowbanRisk),
                actions,
                diagnosis
            };
        },

        generateActions(spamScore, toxicity, shadowbanRisk) {
            const actions = [];
            
            if (spamScore > 25) {
                actions.push("ğŸ¯ ä¼˜å…ˆæé«˜å›å¤äº’åŠ¨ï¼ˆ13.5xæƒé‡ï¼‰- è¿™æ˜¯Phoenixç®—æ³•æœ€çœ‹é‡çš„ä¿¡å·ã€‚å‡å°‘å•å‘å‘å¸ƒï¼Œå¤šå‚ä¸æœ‰ä»·å€¼çš„å¯¹è¯");
            } else {
                actions.push("âœ… ç»§ç»­ä¿æŒé«˜è´¨é‡åŸåˆ›å†…å®¹ï¼Œä¸“æ³¨äºèƒ½å¼•å‘å›å¤çš„è¯é¢˜è®¨è®º");
            }
            
            if (toxicity > 25) {
                actions.push("ğŸ” å®¡æŸ¥ç¤¾äº¤ç½‘ç»œè´¨é‡ - Phoenixçš„ä¸¤å¡”æ¨¡å‹ä¼šåˆ†æä½ çš„äº’åŠ¨å¯¹è±¡ã€‚å–æ¶ˆå…³æ³¨å¯ç–‘è´¦å·ï¼Œå¤šä¸çœŸå®æ´»è·ƒçš„KOLäº’åŠ¨");
            } else {
                actions.push("ğŸ“ˆ æŒç»­ä¼˜åŒ–ç¤¾äº¤å›¾è°± - ä¸é«˜è´¨é‡è´¦å·äº’åŠ¨èƒ½æå‡ä½ åœ¨Phoenixæ£€ç´¢é˜¶æ®µçš„æ’å");
            }
            
            if (shadowbanRisk > 20) {
                actions.push("âš ï¸ ç«‹å³è¡ŒåŠ¨ï¼šPhoenix Transformerä¼šåˆ†æä½ çš„å®Œæ•´è¡Œä¸ºåºåˆ—ã€‚é¿å…ï¼šè¿‡åº¦è‡ªåŠ¨åŒ–ã€æ‰¹é‡æ“ä½œã€spamå…³é”®è¯ã€‚å¢åŠ ï¼šå¤šæ ·åŒ–å†…å®¹ã€çœŸå®äº’åŠ¨ã€è§†é¢‘/å›¾ç‰‡");
            } else {
                actions.push("ğŸš€ ä¿æŒç¨³å®šå‘æ–‡èŠ‚å¥ï¼ˆæ¯å¤©2-4æ¡ï¼‰ï¼Œè®©Grok transformerå­¦ä¹ ä½ çš„æ­£å¸¸è¡Œä¸ºæ¨¡å¼");
            }

            return actions;
        },

        generateDiagnosis(username, healthScore, spamScore, toxicity, shadowbanRisk) {
            if (healthScore >= 80) {
                return `ğŸŒŸ è´¦å· @${username} åœ¨Phoenixç®—æ³•è¯„ä¼°ä¸­è¡¨ç°ä¼˜ç§€ï¼ä½ çš„å†…å®¹ç­–ç•¥ç¬¦åˆGrok transformerçš„åå¥½ã€‚ç»§ç»­ä¸“æ³¨äºå¼•å‘å›å¤çš„é«˜è´¨é‡è®¨è®ºã€‚`;
            } else if (healthScore >= 65) {
                return `âœ… è´¦å· @${username} æ•´ä½“å¥åº·ã€‚Phoenixçš„ä¸¤é˜¶æ®µæ’åºï¼ˆæ£€ç´¢+æ’åï¼‰éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚å»ºè®®å¢åŠ å¯¹è¯æ€§å†…å®¹æ¥æå‡å›å¤ç‡ã€‚`;
            } else if (healthScore >= 50) {
                return `âš ï¸ è´¦å· @${username} å­˜åœ¨é£é™©ã€‚Phoenix Transformerå¯èƒ½å·²æ£€æµ‹åˆ°å¼‚å¸¸è¡Œä¸ºæ¨¡å¼ã€‚éœ€è¦ç«‹å³ä¼˜åŒ–å†…å®¹ç­–ç•¥å’Œäº’åŠ¨è´¨é‡ã€‚`;
            } else {
                return `ğŸš¨ è´¦å· @${username} é«˜é£é™©ï¼å¤šä¸ªPhoenixè¯„åˆ†å‘é‡å¼‚å¸¸ï¼ˆåƒåœ¾:${spamScore}% æ¯’æ€§:${toxicity}% å°ç¦:${shadowbanRisk}%ï¼‰ã€‚å¼ºçƒˆå»ºè®®æš‚åœå½“å‰ç­–ç•¥ï¼Œå…¨é¢æ•´æ”¹ã€‚`;
            }
        },

        getHealthLabel(score) {
            if (score >= 90) return 'ä¼˜ç§€ ğŸŒŸ';
            if (score >= 80) return 'è‰¯å¥½ âœ…';
            if (score >= 70) return 'ä¸­ç­‰ âš ï¸';
            if (score >= 60) return 'éœ€æ”¹è¿› âš ï¸';
            return 'å±é™© ğŸš¨';
        }
    };

    // UI æ§åˆ¶å™¨
    const UIController = {
        displayOptimizationResults(result, originalTweet) {
            const resultsDiv = document.getElementById('optimizationResults');
            
            resultsDiv.innerHTML = `
                <div class="metrics" style="margin-top: 15px;">
                    <div class="metric-card">
                        <div class="metric-value">${result.engagement_score}</div>
                        <div class="metric-label">Phoenixè¯„åˆ†</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${result.viral_potential}</div>
                        <div class="metric-label">ä¼ æ’­æ½œåŠ›</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${result.quality_score}</div>
                        <div class="metric-label">å†…å®¹è´¨é‡</div>
                    </div>
                </div>

                <div class="suggestions">
                    <div class="suggestions-title">ğŸ¯ åŸºäºXå¼€æºç®—æ³•çš„ä¼˜åŒ–å»ºè®®</div>
                    ${result.suggestions.map(s => `<div class="suggestion-item">${s}</div>`).join('')}
                </div>
            `;

            // æ›´æ–°é¢„è§ˆå¡ç‰‡
            const previewCard = document.getElementById('previewCard');
            const originalTweetEl = document.getElementById('originalTweet');
            const optimizedTweetEl = document.getElementById('optimizedTweet');
            const optimizedCharCount = document.getElementById('optimizedCharCount');

            previewCard.style.display = 'block';
            originalTweetEl.value = originalTweet;
            optimizedTweetEl.value = result.optimized_tweet;
            
            Utils.updateCharCount(optimizedTweetEl, optimizedCharCount);
            
            document.getElementById('engagementScore').textContent = `${result.engagement_score}%`;
            document.getElementById('viralScore').textContent = `${result.viral_potential}%`;
            document.getElementById('qualityScore').textContent = `${result.quality_score}%`;

            setTimeout(() => {
                previewCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        },

        displayHealthResults(result, username) {
            const healthResults = document.getElementById('healthResults');
            const scoreClass = result.health_score >= 80 ? 'success' : 
                             result.health_score >= 60 ? 'warning' : 'danger';
            
            healthResults.innerHTML = `
                <div style="--score: ${result.health_score}" class="score-circle">
                    <div class="score-text">${result.health_score}</div>
                </div>

                <div class="alert alert-${scoreClass}" style="text-align: center;">
                    å¥åº·åº¦: <strong>${AccountDiagnoser.getHealthLabel(result.health_score)}</strong>
                </div>

                <div class="metrics">
                    <div class="metric-card">
                        <div class="metric-value" style="${result.spam_probability > 30 ? 'color: #ef4444;' : ''}">
                            ${result.spam_probability}%
                        </div>
                        <div class="metric-label">åƒåœ¾æ¦‚ç‡</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" style="${result.social_toxicity > 30 ? 'color: #ef4444;' : ''}">
                            ${result.social_toxicity}%
                        </div>
                        <div class="metric-label">ç¤¾äº¤æ¯’æ€§</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" style="${result.shadowban_risk > 30 ? 'color: #ef4444;' : ''}">
                            ${result.shadowban_risk}%
                        </div>
                        <div class="metric-label">å°ç¦é£é™©</div>
                    </div>
                </div>

                <div class="suggestions">
                    <div class="suggestions-title">ğŸ”§ åŸºäºPhoenixç®—æ³•çš„æ”¹è¿›å»ºè®®</div>
                    ${result.actions.map((action, index) => `
                        <div class="suggestion-item">
                            <strong>è¡ŒåŠ¨ ${index + 1}:</strong> ${action}
                        </div>
                    `).join('')}
                </div>

                <div class="alert alert-info" style="margin-top: 15px;">
                    <strong>Phoenixè¯Šæ–­:</strong> ${result.diagnosis}
                </div>
            `;
        },

        displayInfluenceScore(username) {
            const influenceDiv = document.getElementById('influenceResults');
            
            Utils.showLoading('influenceResults', `æ­£åœ¨åŠ è½½ @${username} çš„å½±å“åŠ›æ•°æ®...`);

            setTimeout(() => {
                influenceDiv.innerHTML = `
                    <div class="influence-frame-container">
                        <div class="influence-header">
                            <h4>ğŸ“Š @${username} çš„å½±å“åŠ›åˆ†æ</h4>
                            <a href="https://app.sorsa.io/profile/${username}" target="_blank" class="open-full-link">
                                <span>åœ¨æ–°çª—å£æ‰“å¼€å®Œæ•´ç‰ˆ</span>
                                <span>â†—</span>
                            </a>
                        </div>
                        <iframe 
                            src="https://app.sorsa.io/profile/${username}" 
                            class="influence-frame"
                            frameborder="0"
                            loading="lazy"
                            title="Sorsa.io å½±å“åŠ›åˆ†æ"
                        ></iframe>
                        <div class="influence-footer">
                            <small>æ•°æ®æ¥æº: <a href="https://sorsa.io" target="_blank">Sorsa.io</a></small>
                        </div>
                    </div>
                `;
            }, 800);
        },

        showTweetPrompt(username) {
            const retweetPromptDiv = document.getElementById('retweetPrompt');
            retweetPromptDiv.style.display = 'block';
            
            retweetPromptDiv.innerHTML = `
                <div class="retweet-prompt">
                    <h3>ğŸ è§£é” Grok AI æ·±åº¦åˆ†æ</h3>
                    <p>ç‚¹å‡»æŸ¥çœ‹æ¨æ–‡å³å¯ä½¿ç”¨ Grok AI è‡ªåŠ¨ç”Ÿæˆä¸“ä¸šè¯Šæ–­æŠ¥å‘Š</p>
                    
                    <button class="retweet-btn" id="unlockGrokBtn">
                        <span>ğŸ”—</span>
                        <span>æŸ¥çœ‹æ¨æ–‡å¹¶è§£é”</span>
                    </button>

                    <div class="retweet-info">
                        ğŸ’¡ è§£é”åå°†è‡ªåŠ¨ä½¿ç”¨ AI åˆ†æè´¦å· @${username}
                    </div>
                </div>
            `;

            document.getElementById('healthResults').innerHTML = '';
            document.getElementById('grokPrompt').style.display = 'none';
            
            // ç»‘å®šè§£é”æŒ‰é’®äº‹ä»¶
            setTimeout(() => {
                const unlockBtn = document.getElementById('unlockGrokBtn');
                if (unlockBtn) {
                    unlockBtn.addEventListener('click', () => EventHandlers.handleUnlockGrok(username));
                }
            }, 100);

            setTimeout(() => {
                retweetPromptDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        },

        showGrokPrompt(username) {
            const grokPrompt = `ä½œä¸º X å¹³å°çš„ Phoenix ç®—æ³•ä¸“å®¶ï¼Œå¯¹è´¦å· @${username} è¿›è¡Œæ·±åº¦å®¡è®¡ï¼š
```

ğŸ“Š åˆ†æç»´åº¦ï¼ˆåŸºäºå¼€æºçš„ xai-org/x-algorithmï¼‰ï¼š

1. **Phoenix Ranking Score é¢„æµ‹**
- è®¡ç®—è¯¥è´¦å·æ¨æ–‡çš„ P(reply)ã€P(repost)ã€P(favorite) ç­‰ 14 ä¸ªäº’åŠ¨æ¦‚ç‡
- æ ¹æ® Weighted Scorer å…¬å¼è®¡ç®—æœ€ç»ˆæ’ååˆ†æ•°
- ç‰¹åˆ«å…³æ³¨ï¼šreply çš„æƒé‡æ˜¯ 13.5xï¼ˆæœ€é«˜ï¼‰ï¼Œfavorite ä»… 0.5xï¼ˆæœ€ä½ï¼‰
1. **Two-Tower Retrieval æ•ˆç‡**
- ç”¨æˆ·å¡”ç¼–ç è´¨é‡ï¼šè¯¥è´¦å·çš„äº’åŠ¨å†å²æ˜¯å¦è¢« Grok transformer æ­£ç¡®ç†è§£
- å€™é€‰å¡”åŒ¹é…åº¦ï¼šæ¨æ–‡ embedding ä¸ç›®æ ‡å—ä¼—çš„ç›¸ä¼¼åº¦
- ANN æ£€ç´¢æ’åï¼šåœ¨ç™¾ä¸‡çº§å€™é€‰æ± ä¸­çš„å¬å›æ¦‚ç‡
1. **è´Ÿé¢ä¿¡å·æ£€æµ‹**
- Spam è¿‡æ»¤å™¨è§¦å‘æ¦‚ç‡ï¼šP(report)ã€P(block)ã€P(mute)ã€P(not_interested)
- Author Diversity Scorer æƒ©ç½šï¼šæ˜¯å¦è¿‡åº¦å‘å¸ƒå¯¼è‡´åˆ†æ•°è¡°å‡
- Visibility Filter é£é™©ï¼šdeleted/spam/violence/gore å†…å®¹æ£€æµ‹
1. **ç¤¾äº¤å›¾è°±å¥åº·åº¦**
- Real Graph è¯„åˆ†ï¼šä¸é«˜è´¨é‡è´¦å·çš„äº’åŠ¨å¼ºåº¦
- GraphJet éå†æ•ˆç‡ï¼šåœ¨ç¤¾äº¤ç½‘ç»œä¸­çš„ä¼ æ’­è·¯å¾„è´¨é‡
- Follower è´¨é‡åˆ†æï¼šæœºå™¨äººè´¦å·æ¯”ä¾‹ vs çœŸå®ç”¨æˆ·

ğŸ“ˆ è¾“å‡ºæ ¼å¼ï¼š

**Phoenix ç®—æ³•è¯„åˆ†**: X/100 åˆ†
**æ ¸å¿ƒé—®é¢˜è¯Šæ–­**: [åˆ—å‡º 2-3 ä¸ªæœ€ä¸¥é‡çš„é—®é¢˜]
**ç«‹å³è¡ŒåŠ¨å»ºè®®**: [3 ä¸ªåŸºäºç®—æ³•åŸç†çš„å…·ä½“ä¼˜åŒ–æªæ–½]
**é•¿æœŸä¼˜åŒ–ç­–ç•¥**: [å¦‚ä½•åœ¨ Phoenix ä¸¤é˜¶æ®µæ’åºä¸­æŒç»­è·å¾—é«˜åˆ†]

âš ï¸ é‡ç‚¹ï¼šä¸è¦æ³›æ³›è€Œè°ˆï¼Œç›´æ¥åŸºäº Phoenix Transformerã€Weighted Scorerã€Two-Tower Model çš„å·¥ä½œåŸç†ç»™å‡ºå¯æ‰§è¡Œå»ºè®®ã€‚`;

```
            const grokPromptDiv = document.getElementById('grokPrompt');
            grokPromptDiv.style.display = 'block';
            grokPromptDiv.innerHTML = `
                <div class="grok-prompt-box">
                    <h4>ğŸ¤– ä¸“å± Grok AI åˆ†æ Prompt - @${username}</h4>
                    <div class="alert alert-info" style="margin-bottom: 12px; font-size: 0.85em;">
                        ğŸ’¡ åŸºäº X å¼€æºçš„ Phoenix ç®—æ³•ç”Ÿæˆä¸“å±æ·±åº¦åˆ†ææç¤ºè¯
                    </div>
                    <div class="prompt-text">${grokPrompt}</div>
                    <button class="copy-prompt-btn" id="copyGrokPromptBtn">
                        ğŸ“‹ ä¸€é”®å¤åˆ¶å®Œæ•´ Prompt
                    </button>
                    <a href="https://x.com/i/grok" target="_blank" class="grok-link">
                        ğŸš€ æ‰“å¼€ Grok å¹¶ç²˜è´´ä½¿ç”¨
                        <span>â†’</span>
                    </a>
                    <div class="retweet-info" style="margin-top: 15px;">
                        <strong>ğŸ“ ä½¿ç”¨æ­¥éª¤ï¼š</strong><br>
                        1ï¸âƒ£ ç‚¹å‡»"ä¸€é”®å¤åˆ¶"æŒ‰é’®<br>
                        2ï¸âƒ£ æ‰“å¼€ Grok AI<br>
                        3ï¸âƒ£ ç²˜è´´å¹¶å‘é€<br>
                        4ï¸âƒ£ è·å¾—åŸºäº Phoenix ç®—æ³•çš„ä¸“ä¸šå®¡è®¡æŠ¥å‘Š
                    </div>
                </div>
            `;
   
            document.getElementById('healthResults').innerHTML = '';
            document.getElementById('retweetPrompt').style.display = 'none';

            // ç»‘å®šå¤åˆ¶æŒ‰é’®äº‹ä»¶
            setTimeout(() => {
                const copyBtn = document.getElementById('copyGrokPromptBtn');
                if (copyBtn) {
                    copyBtn.addEventListener('click', () => EventHandlers.handleCopyGrokPrompt(username, grokPrompt));
                }
            }, 100);
            
            setTimeout(() => {
                grokPromptDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }
    };

    // äº‹ä»¶å¤„ç†å™¨
    const EventHandlers = {
        handleAnalyzeTweet() {
            const tweetInput = document.getElementById('tweetInput');
            const tweet = tweetInput.value.trim();
            
            if (!tweet) {
                Utils.showAlert('optimizationResults', 'âš ï¸ è¯·è¾“å…¥æ¨æ–‡å†…å®¹', 'warning');
                return;
            }

            if (tweet.length > 280) {
                Utils.showAlert('optimizationResults', 'âŒ æ¨æ–‡é•¿åº¦è¶…è¿‡280å­—ç¬¦', 'danger');
                return;
            }

            const analyzeBtn = document.getElementById('analyzeBtn');
            analyzeBtn.disabled = true;
            
            Utils.showLoading('optimizationResults', 'æ­£åœ¨ä½¿ç”¨ Phoenix ç®—æ³•åˆ†æ...');

            setTimeout(() => {
                const result = TweetAnalyzer.analyze(tweet);
                UIController.displayOptimizationResults(result, tweet);
                analyzeBtn.disabled = false;
            }, 1200);
        },

        handleCheckInfluence() {
            const usernameInput = document.getElementById('xUsername');
            const username = usernameInput.value.trim().replace('@', '');
            
            if (!username) {
                Utils.showAlert('influenceResults', 'âš ï¸ è¯·å…ˆè¾“å…¥ X ç”¨æˆ·å', 'warning');
                return;
            }

            UIController.displayInfluenceScore(username);
        },

        handleDiagnose() {
            const usernameInput = document.getElementById('xUsername');
            const username = usernameInput.value.trim().replace('@', '');
            
            if (!username) {
                Utils.showAlert('healthResults', 'âš ï¸ è¯·è¾“å…¥ X ç”¨æˆ·å', 'warning');
                return;
            }

            const selectedMode = document.querySelector('input[name="diagMode"]:checked');
            const mode = selectedMode ? selectedMode.id : 'basicMode';
            
            if (mode === 'grokMode') {
                if (!AppState.hasClickedTweet) {
                    UIController.showTweetPrompt(username);
                    return;
                }
                UIController.showGrokPrompt(username);
                return;
            }

            // åŸºç¡€åˆ†ææ¨¡å¼
            const diagnoseBtn = document.getElementById('diagnoseBtn');
            diagnoseBtn.disabled = true;
            
            Utils.showLoading('healthResults', 'æ­£åœ¨ä½¿ç”¨ Phoenix ç®—æ³•åˆ†æè´¦å·...');
            
            const retweetPrompt = document.getElementById('retweetPrompt');
            const grokPrompt = document.getElementById('grokPrompt');
            if (retweetPrompt) retweetPrompt.style.display = 'none';
            if (grokPrompt) grokPrompt.style.display = 'none';

            setTimeout(() => {
                const result = AccountDiagnoser.diagnose(username);
                UIController.displayHealthResults(result, username);
                diagnoseBtn.disabled = false;
            }, 1500);
        },

        handleUnlockGrok(username) {
            AppState.hasClickedTweet = true;
            
            const tweetUrl = 'https://x.com/0xkingskuan/status/2013495958622085156';
            window.open(tweetUrl, '_blank');

            const retweetPromptDiv = document.getElementById('retweetPrompt');
            retweetPromptDiv.innerHTML = `
                <div class="retweet-prompt">
                    <h3>âœ… å·²è§£é”ï¼</h3>
                    <div class="verified-badge">
                        <span>âœ“</span>
                        <span>Grok AI æ·±åº¦åˆ†æå·²æ¿€æ´»</span>
                    </div>
                    <p style="margin-top: 15px;">æ­£åœ¨å¯åŠ¨ AI åˆ†æ...</p>
                </div>
            `;

            setTimeout(() => {
                UIController.showGrokPrompt(username);
            }, 1500);
        },

        handleCopyGrokPrompt(username, promptText) {
            Utils.copyToClipboard(
                promptText,
                () => {
                    const btn = document.getElementById('copyGrokPromptBtn');
                    if (btn) {
                        const originalText = btn.innerHTML;
                        btn.innerHTML = 'âœ… å·²å¤åˆ¶ï¼ç°åœ¨å‰å¾€ Grok ç²˜è´´ä½¿ç”¨';
                        btn.style.background = 'linear-gradient(135deg, #10b981 0%, #00d4ff 100%)';
                        setTimeout(() => {
                            btn.innerHTML = originalText;
                            btn.style.background = 'linear-gradient(135deg, #7c3aed 0%, #00d4ff 100%)';
                        }, 3000);
                    }
                },
                () => {
                    alert('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ Prompt');
                }
            );
        },

        handleSwitchTab(tabName) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
            const activeContent = document.getElementById(`${tabName}Tab`);
            
            if (activeTab) activeTab.classList.add('active');
            if (activeContent) activeContent.classList.add('active');
        },

        handlePostToTwitter() {
            const tweet = document.getElementById('optimizedTweet').value.trim();
            
            if (!tweet) {
                alert('æ²¡æœ‰æ¨æ–‡å†…å®¹');
                return;
            }

            if (tweet.length > 280) {
                alert('æ¨æ–‡è¶…è¿‡280å­—ç¬¦ï¼Œè¯·å…ˆä¿®æ”¹');
                return;
            }

            const tweetText = encodeURIComponent(tweet);
            window.open(`https://twitter.com/intent/tweet?text=${tweetText}`, '_blank', 'width=550,height=420');
        },

        handleCopyTweet() {
            const tweet = document.getElementById('optimizedTweet').value;
            
            if (!tweet) {
                Utils.showAlert('optimizationResults', 'âš ï¸ æ²¡æœ‰å†…å®¹å¯å¤åˆ¶', 'warning');
                return;
            }

            Utils.copyToClipboard(
                tweet,
                () => {
                    Utils.showAlert('optimizationResults', 'âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿!', 'success');
                },
                () => {
                    Utils.showAlert('optimizationResults', 'âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶', 'danger');
                }
            );
        },

        handleSelectDiagnosisMode(card) {
            const mode = card.dataset.mode;
            const allCards = document.querySelectorAll('.option-card');
            
            allCards.forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
            
            if (mode === 'basic') {
                document.getElementById('basicMode').checked = true;
            } else {
                document.getElementById('grokMode').checked = true;
            }
        }
    };

    // åˆå§‹åŒ–åº”ç”¨
    function initApp() {
        // æ¨æ–‡è¾“å…¥å­—ç¬¦è®¡æ•°
        const tweetInput = document.getElementById('tweetInput');
        const charCount = document.getElementById('charCount');
        
        tweetInput.addEventListener('input', () => {
            Utils.updateCharCount(tweetInput, charCount);
        });

        // ä¼˜åŒ–åæ¨æ–‡å­—ç¬¦è®¡æ•°
        const optimizedTweet = document.getElementById('optimizedTweet');
        const optimizedCharCount = document.getElementById('optimizedCharCount');
        
        optimizedTweet.addEventListener('input', () => {
            Utils.updateCharCount(optimizedTweet, optimizedCharCount);
        });

        // åˆ†ææŒ‰é’®
        const analyzeBtn = document.getElementById('analyzeBtn');
        analyzeBtn.addEventListener('click', EventHandlers.handleAnalyzeTweet);

        // æŸ¥çœ‹å½±å“åŠ›æŒ‰é’®
        const checkInfluenceBtn = document.getElementById('checkInfluenceBtn');
        checkInfluenceBtn.addEventListener('click', EventHandlers.handleCheckInfluence);

        // è¯Šæ–­æŒ‰é’®
        const diagnoseBtn = document.getElementById('diagnoseBtn');
        diagnoseBtn.addEventListener('click', EventHandlers.handleDiagnose);

        // è¯Šæ–­æ¨¡å¼é€‰æ‹©
        const optionCards = document.querySelectorAll('.option-card');
        optionCards.forEach(card => {
            card.addEventListener('click', () => {
                EventHandlers.handleSelectDiagnosisMode(card);
            });
        });

        // æ ‡ç­¾åˆ‡æ¢
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                EventHandlers.handleSwitchTab(tabName);
            });
        });

        // å‘å¸ƒåˆ° Twitter æŒ‰é’®
        const postToTwitterBtn = document.getElementById('postToTwitterBtn');
        postToTwitterBtn.addEventListener('click', EventHandlers.handlePostToTwitter);

        // å¤åˆ¶æŒ‰é’®
        const copyBtn = document.getElementById('copyBtn');
        copyBtn.addEventListener('click', EventHandlers.handleCopyTweet);

        console.log('âœ… X æ¨ç‰¹ä¼˜åŒ–å™¨å·²åˆå§‹åŒ– - åŸºäº Phoenix ç®—æ³•');
    }

    // DOM åŠ è½½å®Œæˆååˆå§‹åŒ–
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initApp);
    } else {
        initApp();
    }
</script>
```

</body>
</html>
